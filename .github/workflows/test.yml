name: Save mdx data on firebase db

on:
    push:
        # branches:
        #     - gh-pages
        paths:
            - "**/*.mdx"

jobs:
    save_to_firebase:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout Repository
              uses: actions/checkout@v3

            - name: Get changed files
              id: changed-files
              uses: tj-actions/changed-files@v38

            - name: List all changed files
              run: |
                  for file in ${{ steps.changed-files.outputs.all_changed_files }}; do
                    echo "$file was changed"
                  done

            - name: Set up Node.js
              uses: actions/setup-node@v2
              with:
                  node-version: "14"
            - name: Run Node.js script
              run: node ../scripts/test.js
              env:
                  CHANGED_FILES: ${{ steps.changed-files.outputs.all_changed_files }}
